<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Special Wishes ðŸŽ‰</title>

<style>
  :root {
    --bg1:#0f2027; --bg2:#203a43; --bg3:#2c5364;
    --card:rgba(255,255,255,0.12);
  }

  body.light {
    --bg1:#ffecd2; --bg2:#fcb69f; --bg3:#ffdde1;
    --card:rgba(255,255,255,0.75);
    color:#222;
  }

  body {
    margin:0;
    height:100vh;
    overflow:hidden;
    background:linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
    font-family:"Segoe UI",sans-serif;
    color:white;
  }

  /* ðŸŒŸ Lights */
  .lights {
    position:fixed;
    top:0;
    width:100%;
    display:flex;
    justify-content:space-around;
    z-index:5;
  }
  .bulb {
    width:14px;height:14px;border-radius:50%;
    animation:blink 1.5s infinite alternate;
  }
  .bulb:nth-child(odd){animation-delay:.6s;}
  @keyframes blink{
    from{opacity:.3;}
    to{opacity:1;box-shadow:0 0 15px currentColor;}
  }

  /* ðŸŽŠ Card */
  .card {
    position:relative;
    z-index:10;
    background:var(--card);
    backdrop-filter:blur(12px);
    padding:40px 50px;
    border-radius:20px;
    text-align:center;
    box-shadow:0 0 40px rgba(0,0,0,.3);
    animation:pop 1s ease;
    top:28%;
    margin:auto;
    width:fit-content;
  }
  @keyframes pop{
    from{transform:scale(.6);opacity:0;}
    to{transform:scale(1);opacity:1;}
  }

  h1{font-size:2.4em;margin-bottom:10px;}
  p{font-size:1.2em;}

  /* ðŸŽµ Music button */
  .music-btn {
    position:fixed;
    bottom:20px;
    right:20px;
    background:#ff4081;
    border:none;
    border-radius:50%;
    padding:14px 16px;
    font-size:18px;
    cursor:pointer;
    color:white;
    z-index:20;
    box-shadow:0 5px 15px rgba(0,0,0,.3);
  }

  /* ðŸŽ‰ Falling items */
  .fall {
    position:fixed;
    top:-10px;
    font-size:20px;
    animation:fall linear infinite;
    z-index:1;
  }
  @keyframes fall{
    to{transform:translateY(110vh) rotate(360deg);}
  }

  /* âœ¨ Touch sparkles */
  .sparkle {
    position:fixed;
    pointer-events:none;
    animation:spark .8s ease-out forwards;
  }
  @keyframes spark{
    from{transform:scale(1);opacity:1;}
    to{transform:scale(3);opacity:0;}
  }

  /* ðŸŽ† Fireworks canvas */
  #fireworks {
    position:fixed;
    top:0;left:0;
    width:100vw;height:100vh;
    z-index:0;
    pointer-events:none;
  }
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<!-- ðŸŒŸ Lights -->
<div class="lights">
  <div class="bulb" style="background:red"></div>
  <div class="bulb" style="background:yellow"></div>
  <div class="bulb" style="background:cyan"></div>
  <div class="bulb" style="background:lime"></div>
  <div class="bulb" style="background:pink"></div>
  <div class="bulb" style="background:orange"></div>
</div>

<!-- ðŸŽŠ Card -->
<div class="card">
  <h1 id="title"></h1>
  <p id="msg"></p>
</div>

<!-- ðŸŽµ Music -->
<button class="music-btn" onclick="toggleMusic()">ðŸŽµ</button>
<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/10/26/audio_946b5a3a65.mp3" type="audio/mpeg">
</audio>

<script>
const params = new URLSearchParams(location.search);
const name  = params.get("name") || "Friend";
const type  = params.get("type");
const theme = params.get("theme");
const fx    = params.get("fx");

/* ðŸŒˆ Theme */
if (theme === "light" || theme === "white") {
  document.body.classList.add("light");
}

/* ðŸŽ‚ Message modes */
let title = `Hey ${name} ðŸŽ‰`;
let msg   = "Wishing you happiness, success & endless smiles ðŸ˜Žâœ¨";

if (type === "birthday") {
  title = `Happy Birthday ${name} ðŸŽ‚`;
  msg   = "May your day be filled with cake, joy & surprises ðŸŽ‰ðŸ’–";
} else if (type === "newyear") {
  title = `Happy New Year ${name} ðŸŽŠ`;
  msg   = "New year, new goals, new victories ðŸš€âœ¨";
}

document.getElementById("title").innerText = title;
document.getElementById("msg").innerText   = msg;

/* ðŸŽ‰ Falling emojis */
const items = ["ðŸŽŠ","ðŸŽ‰","âœ¨","ðŸŒ¸","ðŸ’¥","ðŸ€"];
setInterval(() => {
  const el = document.createElement("div");
  el.className = "fall";
  el.innerText = items[Math.floor(Math.random()*items.length)];
  el.style.left = Math.random()*100 + "vw";
  el.style.animationDuration = (3+Math.random()*4)+"s";
  el.style.fontSize = (16+Math.random()*26)+"px";
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),8000);
}, 200);

/* âœ¨ Touch sparkles */
document.addEventListener("touchstart", e => {
  const s = document.createElement("div");
  s.className = "sparkle";
  s.innerText = "âœ¨";
  s.style.left = e.touches[0].clientX + "px";
  s.style.top  = e.touches[0].clientY + "px";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),800);
});

/* ðŸŽµ Music */
const music = document.getElementById("bgm");
function toggleMusic(){
  music.paused ? music.play() : music.pause();
}
document.addEventListener("click",()=>music.play(),{once:true});

/* ðŸŽ† Fireworks Mode */
if (fx === "fireworks") {
  const canvas = document.getElementById("fireworks");
  const ctx = canvas.getContext("2d");

  function resize(){
    canvas.width = innerWidth;
    canvas.height = innerHeight;
  }
  resize(); addEventListener("resize",resize);

  const particles = [];

  function launch(){
    const x = Math.random()*canvas.width;
    const y = Math.random()*canvas.height*0.5;
    const color = `hsl(${Math.random()*360},100%,60%)`;
    for(let i=0;i<40;i++){
      particles.push({
        x,y,
        angle:Math.random()*Math.PI*2,
        speed:Math.random()*5+2,
        alpha:1,
        color
      });
    }
  }

  function animate(){
    ctx.fillStyle="rgba(0,0,0,0.2)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += Math.cos(p.angle)*p.speed;
      p.y += Math.sin(p.angle)*p.speed;
      p.alpha -= .02;
      if(p.alpha<=0){particles.splice(i,1);continue;}
      ctx.globalAlpha = p.alpha;
      ctx.fillStyle = p.color;
      ctx.beginPath();
      ctx.arc(p.x,p.y,2,0,Math.PI*2);
      ctx.fill();
    }
    ctx.globalAlpha = 1;
    requestAnimationFrame(animate);
  }

  setInterval(launch,900);
  animate();
}
</script>

</body>
</html>

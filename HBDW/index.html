<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Special Wishes ğŸ‰</title>

<style>
/* ğŸŒˆ THEME VARIABLES */
:root{
  --bg1:#0f2027;
  --bg2:#203a43;
  --bg3:#2c5364;
  --card:rgba(255,255,255,.12);
  --text:white;
}

/* â˜€ï¸ Light / White */
body.light{
  --bg1:#ffecd2;
  --bg2:#fcb69f;
  --bg3:#ffdde1;
  --card:rgba(255,255,255,.75);
  --text:#222;
}
body.gold{
  --bg1:#3a2c00;
  --bg2:#b8860b;
  --bg3:#ffd700;
  --card:rgba(255,215,0,0.25);
  --text:#1a1200;
}
body.neon{
  --bg1:#0f0c29;
  --bg2:#302b63;
  --bg3:#24243e;
  --card:rgba(0,255,255,0.15);
  --text:#e0ffff;
}
body.pink{
  --bg1:#ff9a9e;
  --bg2:#fad0c4;
  --bg3:#fad0c4;
  --card:rgba(255,255,255,0.6);
  --text:#5a0033;
}
body.ocean{
  --bg1:#0f2027;
  --bg2:#2c5364;
  --bg3:#00c6ff;
  --card:rgba(255,255,255,0.2);
  --text:#e0f7ff;
}
body.matrix{
  --bg1:#000000;
  --bg2:#003300;
  --bg3:#00ff00;
  --card:rgba(0,255,0,0.15);
  --text:#00ff00;
}
body.rainbow{
  --bg1:#ff0000;
  --bg2:#ff7f00;
  --bg3:#8f00ff;
  --card:rgba(255,255,255,0.25);
  --text:white;
}

/* ğŸ–¤ Black */
body.black{
  --bg1:#000;
  --bg2:#000;
  --bg3:#000;
  --card:rgba(255,255,255,.12);
  --text:white;
}

/* ğŸŒ Base body */
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  background:linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
  font-family:"Segoe UI",sans-serif;
  color:var(--text);
}

/* ğŸŒŸ Lights */
.lights{
  position:fixed;
  top:0;
  width:100%;
  display:flex;
  justify-content:space-around;
  z-index:5;
}
.bulb{
  width:14px;
  height:14px;
  border-radius:50%;
  animation:blink 1.5s infinite alternate;
}
.bulb:nth-child(odd){animation-delay:.6s;}
@keyframes blink{
  from{opacity:.3;}
  to{opacity:1;box-shadow:0 0 15px currentColor;}
}

/* ğŸŠ Card */
.card{
  position:relative;
  z-index:10;
  background:var(--card);
  backdrop-filter:blur(12px);
  padding:40px 50px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 0 40px rgba(0,0,0,.3);
  animation:pop 1s ease;
  top:28%;
  margin:auto;
  width:fit-content;
}
@keyframes pop{
  from{transform:scale(.6);opacity:0;}
  to{transform:scale(1);opacity:1;}
}

h1{font-size:2.4em;margin-bottom:10px;}
p{font-size:1.2em;}

/* ğŸµ Buttons */
.btn{
  position:fixed;
  bottom:20px;
  background:#ff4081;
  border:none;
  border-radius:50%;
  padding:14px 16px;
  font-size:18px;
  cursor:pointer;
  color:white;
  z-index:20;
}
.music{right:20px;}
.sfx{right:80px;}

/* ğŸ‰ Emoji fall */
.fall{
  position:fixed;
  top:-10px;
  font-size:20px;
  animation:fall linear infinite;
  z-index:1;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}

/* ğŸ“„ Papers */
.paper{
  position:fixed;
  top:-20px;
  width:12px;
  height:18px;
  opacity:.9;
  z-index:2;
  animation:paperFall linear infinite;
}
@keyframes paperFall{
  to{transform:translateY(110vh) rotate(360deg);}
}

/* âœ¨ Sparkles */
.sparkle{
  position:fixed;
  pointer-events:none;
  animation:spark .8s ease-out forwards;
}
@keyframes spark{
  from{transform:scale(1);opacity:1;}
  to{transform:scale(3);opacity:0;}
}

/* ğŸ† Fireworks */
#fireworks{
  position:fixed;
  top:0;
  left:0;
  width:100vw;
  height:100vh;
  z-index:0;
  pointer-events:none;
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="lights">
  <div class="bulb" style="background:red"></div>
  <div class="bulb" style="background:yellow"></div>
  <div class="bulb" style="background:cyan"></div>
  <div class="bulb" style="background:lime"></div>
  <div class="bulb" style="background:pink"></div>
  <div class="bulb" style="background:orange"></div>
</div>

<div class="card">
  <h1 id="title"></h1>
  <p id="msg"></p>
</div>

<button class="btn music" onclick="toggleMusic()">ğŸµ</button>
<button class="btn sfx" onclick="toggleSfx()">ğŸ”Š</button>

<!-- ğŸµ Music -->
<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/10/26/audio_946b5a3a65.mp3">
</audio>

<!-- ğŸ”Š Sound effects -->
<audio id="fireSound">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_58c2b9b0e6.mp3">
</audio>
<audio id="popSound">
  <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_6c5a0c1e7d.mp3">
</audio>

<script>
const params = new URLSearchParams(location.search);

const name  = params.get("name") || "Friend";
const type  = params.get("type");
const theme = params.get("theme");   // âœ… MISSING LINE (VERY IMPORTANT)
const fx    = (params.get("fx") || "").split(",");

/* ğŸŒˆ Theme handling (ALL themes supported) */
const themes = [
  "light","white","black",
  "gold","neon","pink",
  "ocean","matrix","rainbow"
];

if (themes.includes(theme)) {
  document.body.classList.add(theme);
}

const fx = (params.get("fx") || "").split(",");


/* ğŸ‚ Message */
let title = `Hey ${name} ğŸ‰`;
let msg = "Wishing you happiness, success & endless smiles ğŸ˜âœ¨";

if (type === "birthday") {
  title = `Happy Birthday ${name} ğŸ‚`;
  msg = "Wishing you a day filled with smiles, joy, and great memories ğŸ‰âœ¨";
}
if (type === "newyear") {
  title = `Happy New Year ${name} ğŸŠ`;
  msg = "Fresh year, fresh vibes, and a lot of good memories ahead ğŸ˜ğŸŠ";
}

document.getElementById("title").innerText = title;
document.getElementById("msg").innerText = msg;

/* ğŸ‰ Emoji falling */
const emojis = ["ğŸ‰","ğŸŠ","âœ¨","ğŸ’¥","ğŸ”¥","ğŸ†","ğŸš€","â­"];
setInterval(() => {
  const e = document.createElement("div");
  e.className = "fall";
  e.innerText = emojis[Math.floor(Math.random() * emojis.length)];
  e.style.left = Math.random() * 100 + "vw";
  e.style.animationDuration = (3 + Math.random() * 4) + "s";
  e.style.fontSize = (16 + Math.random() * 26) + "px";
  document.body.appendChild(e);
  setTimeout(() => e.remove(), 8000);
}, 220);

/* ğŸ“„ Papers */
if (fx.includes("papers")) {
  setInterval(() => {
    const p = document.createElement("div");
    p.className = "paper";
    p.style.left = Math.random() * 100 + "vw";
    p.style.animationDuration = (4 + Math.random() * 5) + "s";
    p.style.background = ["#fff","#ffeb3b","#80d8ff","#ff80ab"]
      [Math.floor(Math.random() * 4)];
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 10000);
  }, 300);
}

/* ğŸµ Music */
const music = document.getElementById("bgm");
function toggleMusic() {
  music.paused ? music.play() : music.pause();
}
document.addEventListener("click", () => music.play(), { once: true });

/* ğŸ”Š Sound effects */
let sfx = true;
const fireSound = document.getElementById("fireSound");
const popSound = document.getElementById("popSound");
function toggleSfx() { sfx = !sfx; }

/* ğŸ† Fireworks + click */
if (fx.includes("fireworks")) {
  const canvas = document.getElementById("fireworks");
  const ctx = canvas.getContext("2d");
  const ps = [];

  function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
  }
  resize();
  addEventListener("resize", resize);

  function explode(x, y) {
    const color = `hsl(${Math.random() * 360},100%,60%)`;
    for (let i = 0; i < 45; i++) {
      ps.push({
        x, y,
        a: Math.random() * Math.PI * 2,
        s: Math.random() * 6 + 2,
        o: 1,
        c: color
      });
    }
    if (sfx) {
      fireSound.currentTime = 0;
      fireSound.play();
    }
  }

  document.addEventListener("click", e => {
    explode(e.clientX, e.clientY);
    if (sfx) {
      popSound.currentTime = 0;
      popSound.play();
    }
  });

  function animate() {
    ctx.fillStyle = "rgba(0,0,0,0.2)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    for (let i = ps.length - 1; i >= 0; i--) {
      const p = ps[i];
      p.x += Math.cos(p.a) * p.s;
      p.y += Math.sin(p.a) * p.s;
      p.o -= 0.02;
      if (p.o <= 0) {
        ps.splice(i, 1);
        continue;
      }
      ctx.globalAlpha = p.o;
      ctx.fillStyle = p.c;
      ctx.beginPath();
      ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
      ctx.fill();
    }
    ctx.globalAlpha = 1;
    requestAnimationFrame(animate);
  }

  setInterval(() => explode(Math.random() * canvas.width,
                            Math.random() * canvas.height * 0.5), 1200);
  animate();
}
</script>

</body>
</html>
